# 09-1. 운영체제를 알아야 하는 이유

---

### 운영체제

- 운영체제(operating system)
    - 하드웨어를 조작하는 프로그램
    - 응용 프로그램과 하드웨어 사이에서 응용 프로그램에 필요한 자원을 할당
    - 응용 프로그램이 올바르게 생성되도록 관리

- 커널 영역(kernel space)
    - 컴퓨터 부팅 시 운영체제는 메모리 내 커널영역 공간에 적재되어 실행
- 사용자 영역( user space)
    - 커널 영역을 제외한 나머지 영역
    - 사용자가 이용하는 응용 프로그램은 사용자 영역에 적재되어 실행

# 09-2. 운영체제의 큰 그림

---

### 커널(kernel)

자원 접근 및 조작 기능, 프로그램이 올바르고 안전하게 실행되게 하는 기능을 담당

### 사용자 인터페이스(UI : User Interface)

- 윈도우의 바탕화면과 같이 사용자가 컴퓨터와 상호작용할 수 있는 통로(커널에 포함 X)
    - 그래픽 유저 인터페이스(GUI:Graphical User Interface)

      : 그래픽(윈도우 바탕화면, 스마트폰  화면 등)을 기반으로 컴퓨터와 상호작용할 수 있는 인터페이스

    - 커맨드 라인 인터페이스(CLI:Command Line Interface)

      : 명령어를 기반으로 컴퓨터와 상호작용할 수 있는 인터페이스


## 이중 모드와 시스템 호출

- 자원을 보호하기 위해 응용 프로그램이 하드웨어 자원에 직접 접근 방지,운영체제를 통해서만 접근 →  이중 모드

### **이중 모드(dual mode)**

: **CPU가 명령어를 실행하는 모드를 커널 모드와 사용자 모드로 구분하는 방식**

- 사용자 모드
    - 일반적인 응용 프로그램은은 기본적으로 사용자 모드로 실행됨
    - 운영체제 서비스를 제공 X
    - 커널 영역의 코드를 실행 X
    - 사용자 모드로 실행 중인 CPU는 하드웨어 자원에 접근하는 명령어(입출력 명령어) 실행X
        - 자원 접근  X
- 커널 모드
    - 커널 모드로 명령어 실행 시 자원에 접근하는 명령어 포함 모든 명령어 실행 가능
    - 운영체제 서비스를 제공받을 수 있는 실행 모드
    - 운영체제는 커널 모드로 실행 → 자원 접근 O
    - 커널 영역 코드 실행

### 시스템 호출(system call(시스템 콜)

**: 운영체제 서비스를 제공받기 위해 커널 모드로 전환하는 방법**

(운영체제 서비스를 제공받기 위한 요청)

- **사용자 모드로 실행되는 프로그램이 자원에 접근하려면?**
    - 운영체제 서비스를 제공받으려면 운영체제에 요청을 보내 커널 모드로 전환되어야 함

      → 시스템 콜

    - 시스템 호출을 통해 커널 모드로 전환하여 운영체제 서비스를 제공받을 수 있음
    - 시스템 호출은 일종의 인터럽트(소프트웨어 인터럽트)
        - 소프트웨어 인터럽트: 특정 명령어에 의해 발생하는 인터럽트

- CPU의 시스템 호출 처리 순서
    1. 시스템 호출을 발생시키는 명령어 실행
    2. 지금까지 진행 작업 백업
    3. 커널 영역 내에 시스템 호출을 수행하는 코드(인터럽트 서비스 루틴) 실행
    4. 기존 실행 중이던 응용 프로그램으로 복귀

## 운영체제 핵심 서비스

- **프로세스 관리**
    - 프로세스(process) : 실행 중인 프로그램
    - 각 프로세스의 상태 및 사용하는 자원은 매우 다양

      입출력 장치를 주로 사용하는 프로세스

      입출력장치는 거의 사용하지 않고 주로 CPU만 사용하는 프로세스

      당장 실행할 수 있는 프로세스

      당장 실행이 불가능한 프로세스

    - 여러 프로세스가 동시에 실행되는 환경

      → 프로세스 동기화 필수

      → 교착 상태 해결


- **자원 접근 및 할당**
    - 모든 프로세스는 실행 시 자원 필요
    - 운영체제 →  프로세스들이 사용할 자원을 접근하고 조작하여 자원 할당

  **CPU**
    
  ---

    - 하나의 CPU는 하나의 프로세스만 실행 → 메모리에 여러 프로세스 적재
    - CPU가 프로세스 실행 중이라면 다른 프로세스는 대기
    - CPU 스케줄링 : 운영체제가 프로세스에 CPU 할당 시 우선순위, 시간 등을 결정



    **메모리**
    
    ---
    
    - 메모리에 적재된 프로세스는 실행할 때마다 적재되는 주소가 달라질 수 있음
    - 운영체제는 새로운 프로세스가 적재될 때마다 적재할지 결정
    - 메모리가 이미 꽉 차있어 실행해야 할 프로세스를 적재할 공간이 없는 경우도 있고, 메모리에 공간이 남았으나 프로세스를 적재하지 못하는 상황도 발생하기도 함
    
    **입출력 장치**
    
    ---
    
    - 인터럽트 서비스 루틴은 운영체제가 제공하는 기능으로 커널 영역에 있음
    - 하드웨어 인터럽트도 커널 영역에 존재
    - 입출력장치가 CPU에 하드웨어 인터럽트 요청 신호를 보내면 CPU는 실행 중이던 작업을  잠시 백업한 뒤 커널 영역에 있는 인터럽트 서비스 루틴을 실행
    - 운영체제 : 인터럽트를 처리하는 프로그램(인터럽트 서비스 루틴을 제공)
        
        → 입출력 작업 수행


- **파일 시스템 관리**

  파일 시스템(file system) : 파일의 실행, 생성, 삭제

  → 파일을 한데 묶어 디렉터리(폴더)로 관리