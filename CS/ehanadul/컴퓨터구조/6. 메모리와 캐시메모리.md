# 06-1. RAM의 특징과 종류

우리가 실행하는 프로그램은 모두 RAM에 저장되어 있음

RAM의 하드웨어적 특성과 종류 알기

- 주기억장치의 종류에는 크게 **RAM** 과 **ROM** , 두 가지가 있고

  여기서 ‘메모리’라는 용어는 `RAM` 을 지칭하는 경우가 많음

- `DRAM`, `SRAM`, `SDRAM`, `DDR`, `SDRAM`

## RAM의 특징

RAM에는 실행할 프로그램의 명령어와 데이터가 저장됨

- 중요한 점은 RAM은 점원을 끄면 RAM에 저장된 명령어와 데이터가 모두 날아감

  → 전원을 끄면 저장된 내용이 사라지는 저장 장치인 `휘발성 저장 장치` (volatile memory)

- 전원이 꺼져도 저장한 내용이 유지되는 장치는 `비휘발성 저장 장치` (non-volatile memory)

  예) 하드 디스크, SSD, CD-ROM, USB 메모리와 같은 보조기억장치

    - 보조기억장치는 전원을 꺼도 내용을 유지하지만, CPU는 보조기억장치에 직접 접근하지 못함
- 보조기억장치인 비휘발성 저장 장치에는 ‘보관할 대상’을 저장하고,
  휘발성 저장 장치인 RAM에는 ‘실행할 대상’을 저장함
- CPU가 실행하고 싶은 프로그램이 보조기억장치에 있다면 RAM으로 복사하여 저장한뒤 실행

## RAM의 용량과 성능

- CPU가 실행하고 싶은 프로그램이 보조기억장치에 있다면 이를 RAM으로 가져와야 하는데,
  RAM의 용량이 적으면 보조기억장치에서 실행할 프로그램을 가져오는 일이 잦아 실행 시간이 길어짐

  예를 들어, RAM의 용량이 프로그램 A, B, C 중 하나만 저장할 수 있 을 만큼 작다면
  CPU가 프로그램 A를 실행하고 싶을 때는 다시 프로그램 B를 RAM으로 가져 오고,
  프로그램 C를 실행하고 싶으면 또 다시 프로그램 C를 RAM으로 가져와야함

  RAM의 용량이 충분히 크다면, 보조기억장치에서 많은 데이터를 가져와 미리 RAM에 저장할 수 있음

  많은 프로그램을 동시에 실행하는데 유리하고, 위 사례와 달리 프로그램 A,B,C,를 보조장치에서 여러 번 가져오는 수고를 덜 수 있음

- **RAM 용량이 크면 많은 프로그램들을 동시에 빠르게 실행하는 데 유리**
- RAM의 용량이 커지면 프로그램 실행 속도가 어느 정도 증가하지만, 용량이 필요 이상으로 커졌을 때 속도가 그에 비례하여 증가하지는 않음
  (예를 들어 책을 100권 이상 올려 놓은 책상과, 1000권 이상 올려놓을 수 있는 책상에서 책을 읽든 책장을 오가는 시간은 별 차이가 없음)

## RAM의 종류

RAM의 종류는 크게 `DRAM`, `SRAM`, `SDRAM`, `DDR SDRAM`

> **DRAM**
>

DRAM은 Dynamic RAM

- 저장된 데이터가 동적으로 변하는(사라지는) RAM
- DRAM은 **시간이 지나면 저장된 데이터가 점차 사라지는 RAM**
- DRAM은 데이터의 소멸을 막기 위해 일정 주기로 데이터를 재활성화(다시 저장)해야 함
- 이러한 단점에도 일반적으로 메모리로써 사용하는 RAM은 DRAM임

  → 소비 전력이 비교적 낮고, 저렴하고, 집적도가 높아 대용량으로 설계하기에 용이함

  **‘집적도가 높다’는 의미는 ‘더 작고 뺵빽하게 만들 수 있다’는 말**


> **SRAM**
>

SRAM은 Static RAM

- 저장된 데이터가 변하지 않는 RAM
- 시간이 지나면 점차 저장된 내용이 소실되는 DRAM과 달리 SRAM은 시간이 지나도 저장된 데이터가 사라지지 않음
- 주기적으로 데이터를 재활성화할 필요가 없음
- SRAM은 DRAM보다 일반적으로 속도가 빠름
- 시간이 지나도 저장된 데이터가 사라지지 않는다고 해서 SRAM이 비휘발성 메모리인 것은 아님. SRAM도 전원이 공급되지 않으면 저장된 내용이 날아감
- 이러한 장점에도 메모리로 사용되는 RAM은 SRAM이 아닌데,
  SRAM은 DRAM보다 집적도가 낮고, 소비 전력도 크며, 가격도 더 비쌈
- SRAM은 메모리가 아닌 ‘대용량으로 만들어질 필요는 없지만 속도가 빨라야 하는 저장 장치’
  예를 들면 캐시 메모리에서 사용됨


    |  |          DRAM |                     SRAM |
    | --- | --- | --- |
    | 재충전 | 필요함 | 필요 없음 |
    | 속도 | 느림 | 빠름 |
    | 가격 | 저렴함 | 비쌈 |
    | 집적도 | 높음 | 낮음 |
    | 소비 전력 | 적음 | 높음 |
    | 사용 용도 | 주기억장치(RAM) | 캐시 메모리 |

> **SDRAM**
>

SDRAM(Synchronous Dynamic RAM)

- **클럭 신호가 동기화**된, 발전된 형태의 DRAM

  → 클럭 신호가 동기화되었다 : 클럭 타이밍에 맞춰 CPU와 정보를 주고받을 수 있음

- 즉, SDRAM은 클럭에 맞춰 동작하며 클럭마다 CPU와 정보를 주고받을 수 있는 DRAM

> **DDR SDRAM**
>

DDR SDRAM(Double Data Rate SDRAM)

- 최근 가장 많이 사용되는 RAM
- DDR SDRAM은 대역폭을 넓혀 속도를 빠르게 만든 SDRAM
- **대역폭(data rate) ‘데이터를 주고받는 길의 너비’**
    - 한 클럭에 하나씩 정보를 주고받을 수 있는 SDRAM과 비교했을 때,
      DDR SDRAM은 너비가 두 배인 도로와 같음
    - 한 클럭에 한 번씩 CPU와 데이터를 주고받을 수 있는 SDRAM에 비해, DDR SDRAM은 두 배의 대역폭으로 한 클럭당 두 번씩 CPU와 데이터를 주고 받을 수 있음
- DDR SDRAM의 전송속도가 두 배가량 빠름
- 한 클럭당 데이터를 주고받을 수 있는 SDRAM을 `SDR SDRAM(Single Data Rate SDRAM)`
- **DDR2 SDRAM**은 **DDR SDRAM**보다 대역폭이 두 배 넓은 SDRAM

  → DDR2 SDRAM은 SDR SDRAM보다 너비가 네 배 넓은 도로

- **DDR3 SDRAM**은 **DDR2 SDRAM**보다 대역폭이 두 배 넓고, SDR SDRAM보다 대역폭이 여덟 배 넓은 SDRAM
- 최근 사용하는 메모리는 DDR4 SDRAM으로, SDR SDRRAM보다 열여섯배 넓은 대역폭을 가짐

**RAM은 휘발성 저장 장치고, 보조기억장치는 비휘발성 저장 장치**

**DRAM은 시간이 지나면 저장된 데이터가 점차 사라지는 RAM이고, SRAM은 시간이 지나도 저장된 데이터가 사라지지 않는 RAM**

**SDRAM은 클럭과 동기화된 DRAM**

**DDR SDRAM은 SDR SDRAM에 비해 대역폭이 두 배 넓음**

- 주기억장치
    - **ROM**
    - **RAM** (주로 메모리라 지칭)
        - DRAM, SRAM, SDRAM, DDR, SDRAM

## RAM의 특징

- 휘발성 저장 장치 (volatile memory)
    - 전원 종료 시 RAM에 저장된 명령어, 데이터 모두 소멸

      ↔ 비휘발성 저장 장치 (non-volatile memory) : 전원 종료 후 저장한 내용 유지

      예) 보조기억장치(하드 디스크, SSD, CD-ROM, USB 등)


- 비휘발성 저장 장치(보조기억장치) - 보관할 대상 저장
- 휘발성 저장 장치(RAM) - 실행할 대상 저장
    - CPU가 실행하고 싶은 프로그램이 보조기억장치에 있다면 RAM으로 복사 및 저장 후 실행

## RAM의 용량과 성능

- RAM 용량 ↓ : 보조기억장치에서 실행할 프로그램을 가져오는 일이 잦아짐 (실행 시간 ↑)
- RAM 용량 ↑:  보조기억장치에서 많은 데이터를 가져와 미리 RAM에 저장할 수 있음


- **RAM 용량이 크면 많은 프로그램들을 동시에 빠르게 실행하는 데 유리**

  (RAM의 용량이 필요 이상으로 커졌을 때  비례하여 속도 증가x)


## RAM의 종류

- DRAM
- SRAM
- SDRAM
- DDR SDRAM

> **DRAM(Dynamic RAM)**
>
- 저장된 데이터가 동적으로 변하는 RAM → **시간이 지나면 저장된 데이터 점차 소멸**
- 데이터의 소멸을 막기 위해 일정 주기로 데이터를 재활성화(다시 저장)해야 함
- DRAM이 일반적인 메모리로 사용되는 RAM인 이유
    - 소비 전력 비교적 낮음
    - 저렴
    - 집적도가 높음 →  대용량 설계 용이

> **SRAM( Static RAM)**
>
- 저장된 데이터가 변하지 않는 RAM → 시간이 지나도 저장된 데이터 소멸 X
    - 전원이 공급되지 않으면 저장된 내용 소멸(RAM : 휘발성메모리)
- 주기적으로 데이터를 재활성화할 필요가 없음
- DRAM보다 일반적으로 속도가 빠름
- 일반적인 메모리로 사용되지 않는 이유
    - DRAM보다 낮은 집적도, 높은 소비 전력 , 비싼 가격
- 대용량으로 만들어질 필요는 없지만 속도가 빨라야 하는 저장 장치
  → 캐시 메모리


    |  |          DRAM |                     SRAM |
    | --- | --- | --- |
    | 재충전 | 필요함 | 필요 없음 |
    | 속도 | 느림 | 빠름 |
    | 가격 | 저렴함 | 비쌈 |
    | 집적도 | 높음 | 낮음 |
    | 소비 전력 | 적음 | 높음 |
    | 사용 용도 | 주기억장치(RAM) | 캐시 메모리 |

> **SDRAM(Synchronous Dynamic RAM)**
>
- **클럭 신호가 동기화**된, 발전된 형태의 DRAM

  → 클럭 신호가 동기화되었다 : 클럭 타이밍에 맞춰 CPU와 정보를 주고받을 수 있음

- 클럭에 맞춰 동작하며 클럭마다 CPU와 정보를 주고받음

> **DDR SDRAM** (Double Data Rate SDRAM)
>
- 최근 가장 많이 사용되는 RAM
- 대역폭을 넓혀 속도를 빠르게 만든 SDRAM
- 대역폭(data rate) - 데이터를 주고받는 길의 너비
    - SDR SDRAM : 한 클럭에 한 번씩 CPU와 데이터를 주고받음
    - DDR SDRAM : 2배의 대역폭으로 한 클럭당 두 번씩 CPU와 데이터를 주고 받을 수 있음

      ⇒ 전송속도가 두 배가량 빠름

    - DDR2 SDRAM : 4배
    - DDR3 SDRAM : 8배
    - DDR4 SDRAM : 16배 넓은 대역폭을 가짐(최근 사용 메모리)

---

# 06-2. 메모리 주소 공간

## 물리 주소와 논리 주소

- CPU와 실행 중인 프로그램이 현재 메모리 몇 번지에 무엇이 저장되어 있는지 알기 어려움

  → 같은 프로그램을 실행하더라도 실행할 때마다 적재되는 주소가 달라질 수 있음

  → 메모리에 저장된 정보는 시시각각 변함


- 물리 주소(physical address)
    - 메모리 하드웨어가 사용하는 주소
    - 정보가 실제로 저장된 하드웨어상의 주소
- 논리 주소(locigal address)
    - CPU와 실행 중인 프로그램이 사용하는 주소
    - 실행 중인 각각의 프로그램에 부여된 0번지부터 시작되는 주소
    - 프로그램마다 같은 논리 주소가 얼마든지 있을 수 있음
    - CPU는 논리 주소를 받아들이고, 해석,연산함

⇒논리 주소, 물리 주소 변환 : CPU가 메모리와 상호작용 하기 위함

### **메모리 관리 장치 (MMU : emory Management Unit)**

- CPU와 주소 버스 사이에 위치한 하드웨어
- 논리 주소와 물리 주소의 변환 수행
- CPU가 발생시킨 논리 주소에 베이스 레지스터 값을 더하여, 논리 주소를 물리 주소로 변환
    - 베이스 레지스터 : 프로그램의 가장 작은 물리 주소,  프로그램의 첫 물리 주소를 저장
    - 논리 주소 : 프로그램의 시작점으로 떨어진 거리

### 메모리 보호 기법

- 한계 레지스터(limit register) : 논리 주소의 최대 크기 저장
    - 논리 주소 범위를 벗어나는 명령어 실행을 방지
    - 실행 중인 프로그램이 다른 프로그램에 영향을 받지 않도록 보호

      (다른 프로그램의 영역을 침범할 수 있는 명령어 → 위험)

    - CPU가 접근하려는 논리 주소는 한계 레지스터가 저장한 값보다 커서는 안됨

  ⇒ 베이스 레지스터 값 ≤ 프로그램의 물리 주소 < 베이스 레지스터 값 + 한계레지스터값


# 06-3. 캐시 메모리

## 저장 장치 계층 구조**(memory hierarchy)**

- ‘CPU에 얼마나 가까운가’를 기준으로 함
- 각기 다른 용량과 성능의 저장 장치들을 계층화하여 표현한 구조
- ↑ : CPU와 가깝고 용량은 작지만 빠른 저장장치, (비쌈)
  ↓ : CPU와 멀고 용량은 크지만 느린 저장 장치, (저렴)
- 낮은 가격대의 대용량 저장 장치 : 느린 속도 감수

  빠른 메모리 :  작은 용량과 비싼 가격 감수


## 캐시 메모리**(cache memory)**

- CPU와 메모리 사이에 위치
- 레지스터보다 용량이 크고 메모리보다 빠른 SRAM 기반의 저장 장치
- CPU의 연산 속도와 메모리 접근 속도의 차이를 줄이기 위해 캐시메모리 사용
    - 메모리에서 CPU가 사용할 일부 데이터를 미리 캐시 메모리로 가져와 활용
- 저장장치 접근 속도 비교
    - 보조기억장치 < 메모리 < 캐시 메모리 < 레지스터
- 여러 개의 캐시 메모리 → CPU(코어)와 가까운 순서대로 계층 구성
    - L1(level 1) 캐시 : 코어와 가장 가까운 캐시 메모리(코어 내부 위치)
    - L2(level 2) 캐시 : 다음으로 가까운 캐시 메모리(코어 내부 위치)
    - L3(level 3) 캐시 : 그 다음으로 가까운 캐시 메모리(코어 외부 위치)
        - 메모리 용량 :  L1< L2 < L3
        - 속도 :  L3 < L2 < L1
        - 가격 :  L3 < L2 < L1
        - 데이터 검색 순서 : L1→ L2 → L3
- 멀티 코어 프로세서의 경우
    - L1, L2  - 코어마다 고유한 캐시 메모리 할당
    - L3 - 여러 코어가 공유하는 형태로 사용됨

### 분리형 캐시**(split cache)**

- 속도 향상을 위해 기존 L1캐시 분리
    - L1I 캐시 : : **명령어만 저장**
    - L1D 캐시 : 데이터만 저장


## 참조 지역성 원리(locality of reference, principle of locality)

**CPU가 메모리에 접근할 때의 주된 경향을 바탕으로 만들어진 원리**

- **시간 지역성(temporal locility)**

  **최근에 접근했던 메모리 공간에 다시 접근하려는 경향**

    - CPU는 변수가 저장된 메모리 공간을 언제든 다시 참조할 수 있음
    - 변수에 저장된 값은 일반적으로 한 번만 사용되지 않고 프로그램이 실행되는 동안 여러 번 사용됨

- **공간 지역성(spatial locality)**

  **접근한 메모리 공간 근처를 접근하려는 경향**

    - CPU가 실행하려는 프로그램은 보통 관련 데이터들끼리 모여 있음
        - 하나의 프로그램 내에서도 관련 있는 데이터들은 모여서 저장됨

          (각각의 기능들과 관련된 데이터는 모여 저장됨)



⇒ 캐시 메모리는 참조 지역성 원리에 입각해 CPU가 사용할 법한 데이터를 예측함

- 캐시 히트(cache hit)
    - 자주 사용될 것으로 예측한 데이터가 실제로 들어맞아 캐시 메모리 내 데이터가 CPU에 활용될 경우
- 캐시 미스(cache miss)
    - 예측이 틀려 메모리에서 필요한 데이터를 직접 가져와야 하는 경우
- 캐시 적중률(cache hit ratio)
    - 캐시가 히트되는 비율 = 캐시 히트 횟수 / (캐시 히트 횟수 + 캐시 미스 횟수)
    - 적중률 ↑ : CPU의 메모리 접근 횟수↓
    - 캐시 메모리는 참조 지역성의 원리에 따라 데이터를 예측하여 캐시 적중률을 높임