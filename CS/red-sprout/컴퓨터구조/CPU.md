# ALU와 제어장치
## ALU
![image](https://github.com/user-attachments/assets/3b3dc17e-f7c9-4064-b1ec-881d6d46a64d)
- 레지스터를 통해 피연산자를 받아들임
- 제어장치를 통해 수행할 연산을 알려주는 제어 신호를 받아들임
- 결과는 레지스터에 저장
- 결과 외에 status(flag)를 내보냄 - 플레그 레지스터에 저장
### 플레그 레지스터
| 부호 플레그 | 제로 플레그 | 캐리 플레그 | 오버플로우 플레그 | 인터럽트 플레그 | 슈퍼바이저 플레그 |
| --- | --- | --- | --- | --- | --- |
| 1 : 음수 | 1 : 연산결과 0 | 1 : 올림수, 빌림수 발생 | 1 : 오버플로우 | 1 : 인터럽트 가능 | 0 : 사용자 모드, 1 : 커널 모드 |

## 제어장치
- 클럭 신호를 받아들임 (클럭 : 컴퓨터의 모든 부품을 일사불란하게 움직일 수 있는 시간 단위)
- 명령어 레지스터로부터 해석해야 할 명령어를 받아들임
- 플래그 레지스터로부터 플래그 값을 받아들임
- 시스템 버스, 그 중에서 제어 버스로 전달된 제어 신호를 받아들임

> 받아들이는 것 : 클럭, 현재 수행할 명령어, 플래그, 제어 신호를 받아들임
  보내는 것 : 내부와 외부로 제어 신호를 내보냄

# 레지스터
## 반드시 알아야 할 레지스터
### 프로그램 카운터(Program Counter, PC)
- 메모리에서 가져올 명령어의 주소를 저장
- 명령어 포인터(Instruction Pointer, IP)

### 명령어 레지스터(Instruction Register, IR)
- 해석할 명령어를 저장

### 메모리 주소 레지스터(Memory Address Register, MAR)
- 메모리 주소를 저장
- CPU가 읽어들이고자 하는 주소 값을 주소 버스로 보낼 때 거침

### 메모리 버퍼 레지스터(Memory Buffer Register, MBR)
- 메모리와 주고받을 데이터를 저장
- 데이터 버스로 주고 받을 값은 MBR을 거침
- 메모리 데이터 레지스터(Memory Date Register, MDR)
- 
### 범용 레지스터
- 다양하고 일반적인 상황에서 자유롭게 사용
- 데이터와 주소를 모두 저장

### 플레그 레지스터
- 연산 결과 혹은 CPU 상태에 대한 부가 정보를 저장

## 스택 주소 지정 방식
### 스택 포인터
- 스택의 최상단의 위치를 저장
- 메모리에는 스택처럼 사용할 영역이 정해져 있음 - 스택 영역
  
## 변위 주소 지정 방식
### 상대 주소 지정 방식
- 오퍼랜드 + 프로그램 카운터 == 유효 주소
- 오퍼랜드가
  - (-) : 읽어 들이기로 했던 명령어의 이전 번지로 접근
  - (+) : 읽어 들이기로 했던 명령어의 이후 번지로 접근

### 베이스 레지스터 주소 지정 방식
- 오퍼랜드 + 베이스 레지스터 == 유효 주소
- 베이스 레지스터 : 기준 주소, 오퍼랜드 : 떨어진 거리

# 명령어 사이클과 인터럽트
## 용어
- 명령어 사이클 : 하나의 명령어를 처리하는 정형화된 흐름
- 인터럽트 : 정해진 흐름이 끊어지는 상황

## 명령어 사이클
- 인출 사이클 : 메모리에 있는 명령을 CPU로 가지고 오는 단계
- 실행 사이클 : CPU로 가져온 명령어를 실행하는 단계
- 간접 사이클 : 명령러를 실행하기 위해 메로리 접근하는 단계

## 인터럽트
### 동기 인터럽트
- CPU에 의해 발생하는 인터럽트, 예외
### 비동기 인터럽트
- 입출력장치에 의해 발생하는 인터럽트
- 순서
  1. 입출력 장치는 CPU에 인터럽트 요청 신호를 보냄
  2. 실행 사이클이 끝나고 명령어 인출 전 항상 인터럽트 여부를 확인
  3. 인터럽트 플래그를 통해 인터럽트를 받을 수 있는지 여부 확인
  4. CPU는 지금까지 작업 백업
  5. 인터럽트 벡터를 참조, 인터럽트 서비스 루틴 실행
  6. 인터럽트 서비스 루틴 종료 - 백업해둔 작업 복구
