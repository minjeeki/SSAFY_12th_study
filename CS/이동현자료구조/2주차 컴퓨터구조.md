## 4-3 인터럽트 

하나의 명령어를 처리하는 흐름을 명렁어 사이클이라고 한다.
cpu는 이러한 정해진 흐름에 따라 명령어를 처리하지만 간혹 이 흐름이 끊기는 상황이 발생하고 이를 '인터럽트'라고 한다.

### 인출 사이클
메모리에 저장된 명령어 하나를 실행한다고 가정하면 명령어를 메모리에서 cpu로 가져와야 한다.
이 단계를 인출 사이클이라고 한다. 

### 실행 사이클
cpu로 명령어를 인출했다면 이제 명령어를 실행한다. 이 단계를 실행 사이클이라고 한다.
제어장치가 명령어 레지스터에 담긴 값을 해석하고, 제어 신호를 발생시키는 단계가 실행 사이클이다. 

### 간접 사이클
3장에서 배운 간접 주소 지정 방식은 유효 주소의 주소를 명시하므로 바로 실행사이클에 돌입할 수 없다.
명령어를 실행하기 위해서는 메모리 접근을 한 번 더해야 하기 때문이다. 이 단계를 간접 사이클이라고 한다.

## 인터럽트
ex) 회사에서 일을 하는 도중 상사로부터 이게 더 급한거니까 하던거 멈추고 이거부터 해줘 요청이 인터럽트라고 보면 된다.
인터럽트에는 동기 인터럽트와 비동기 인터럽트가 있다.

### 동기 인터럽트
cpu에 의해 발생하는 인터럽트. 명령어 수행을 하다가 예상치 못한 상황에 마주쳤을 때, 가령 cpu가 실행하는
프로그래밍상의 오류와 같은 예외적인 상황에 마주쳤을 때 발생하는 인터럽트이다. 예외라고도 부른다.

### 비동기 인터럽트
i/o 장치에 의해 발생하는 인터럽트이다. 
- cpu가 프린터와 같은 입출력장치에 입출력 작업을 부탁하면 작업을 끝낸 입출력장치가 cpu에 완료 알림을 보냅니다.
  하드웨어 인터럽트라고도 한다.

  cpu가 프린터에 출력을 명령했다고 가정.
  io장치는 cpu보다 현저히 느리기 때문에 cpu는 io작업 결과를 바로 볼 수 없음. 이 때 만약 하드웨어 인터럽트를 사용하지 않으면
  cpu는 언제 프린트를 끝낼지 모르기 때문에 주기적으로 프린터의 완료 여부를 확인해야 한다.

  이로 인해 cpu는 다른 일을 할 수 없으니 cpu 사이클 낭비이다. 비동기 인터럽트를 사용하면 cpu는 주기적으로 확인할 필요가
  없고 프린터로부터 프린트 완료 인터럽트를 받을 때까지 다른 작업을 처리할 수 있다.

  ## 하드웨어 인터럽트 처리 순서
  cpu가 인터럽트 요청을 수용하기 위해서는 플래그 레지스터의 인터럽트 플래그가 활성화 되어있어야한다.
  cpu가 어떤 방해도 받지 않아야 할 때는 인터럽트 플래그가 불가능으로 설정된다. 이 때 인터럽트 요청은 무시된다.
  인터럽트 플래그로도 막을 수 없는 인터럽트는 정전이나 하드웨어 고장이 있다.

### 인터럽트 벡터 (isr은 인터럽트 서비스 루틴)
인터럽트 서비스 루틴을 식별하기 위한 정보. 인터럽트 벡터를 알면 isr의 시작 주소를 알 수 있기 때문에 cpu는 인터럽트
벡터를 통해 특정 인터럽트 서비스 루틴을 처음부터 실행할 수 있다.

인터럽트 요청을 받기 전까지 cpu가 수행하고 있었던 일은 isr이 끝나면 되돌아 와서 수행해야 하므로 작업 내역을 백업해야한다.
필요한 모든 내용을 스택 영역에 백업한다. 
  
