## 운영체제란
운영체제는 인터넷 브라우저 같은 프로그램이다. 그래서 메모리에 적재되어야 한다.
운영체제는 특별한 프로그램이므로 항상 컴퓨터가 부팅될 때 메모리 내 **커널 영역**이라는 공간에 따로 적재되어 실행된다.



### 커널 영역
커널 영역을 제외한 나머지 영역, 사용자의 응용 프로그램이 적재되는 영역을 사용자 영역이라고 한다. 

### 운영체제의 역할
1. 커널 영역에 적재되어 사용자 영역에 적재된 프로그램들에 자원을 할당하고 이들이 올바르게 실행되도록 돕습니다.
2. 응용 프로그램들이 메모리 주소가 겹치지 않도록 적당한 공간에 프로그램들을 적재해 준다. \
3. 더 이상 실행되지 않는 프로그램을 메모리에서 삭제하며 지속적으로 메모리 자원을 관리한다.

두 가지 다른 응용 프로그램들이 동시에 프린터를 쓰려고 한다고 가정하자.
동시에 사용하지 못하게 막고, 다른 프로그램은 기다리게 만들어 프린터 자원 관리한다. 

### 근데 왜 운영체제를 공부해야 하는가? 
중간에 메모리 누수 현상을 나타내는 메시지가 나온다. 실제로 개발하다보면 메모리 누수 디버깅 하는 게 많은 것 같은게, 기술 블로그 보니까 메모리 누수 말이 좀 보였었다.
memory leak 말그대로 메모리 누수

소스코드를 하드웨어가 제대로 실행하지 못하면 운영체제는 이런 오류 메시지를 띄어준다. 

## 9-2 운영체제 큰그림
운영체제의 핵심 서비스를 담당하는 부분을 커널이라고 한다.
운영체제 제공 서비스 중 커널에 포함x 서비스가 사용자 인터페이스가 있다.

### 이중 모드와 syscall
운영체제는 응용프로그램이 하드웨어 자원에 직접 접근하는 것을 방지해 자원을 보호한다. 만약 마음대로 접근한다면
자원이 무질서하게 관리될 것이다. 

이를 위해 존재하는게 **사용자모드**와 **커널 모드**이다.
사용자모드는 자원접근 불가, 커널 모드는 자원에 접근 가능하다.

플래그 레지스터 속 슈퍼바이저 플래그를 보면 어떤 모드로 cpu가 실행 중 인지 알 수 있다.

### 시스템 콜
사용자 모드로 실행되는 프로그램이 자원 접근 운영체제 서비스를 제공받으려면 요청을 보내 커널 모드로 전환
되어야 한다. 이 때 이 요청을 시스템 호출(콜)이라고 한다. 근데 이것도 일종의 인터럽트이다.
이러한 명령어에 의해 발생하는 것을 소프트웨어 인터럽트라고 한다. 

이러한 전환은 매우 빈번하게 일어난다. 

## 운영체제의 핵심 서비스 
**1. 프로세스 관리**
 각 프로세스는 사용하고자 하는 자원도 다양하다. 여러 프로세스가 동시에 실행되는 환경에서는
프로세스 동기화가 필수적이다. 프로세스가 더 이상 실행되지 못하는 상황인 **교착 상태**를
해결해야한다.  
**2. 자원 접근 및 할당**
  프로세스가 공정하게 ,얼마나 오래 cpu를 이용하게 할지 결정하는데 이걸, **cpu 스케줄링**이라고 한다.   
**3. 파일 시스템 관리 **
 컴퓨터를 사용할 때 파일들을 폴더로 관리한다. 이런 파일시스템도 운영체제가 지원하는 핵심 서비스이다. 커널 서비스 중 하나이다. 


### 사용자모드와 커널모드의 차이점은 무엇이며, 각각의 모드에서 수행할 수 있는 작업의 종류는 어떻게 다른가요?**

답변: 사용자모드와 커널모드는 CPU의 두 가지 작동 모드입니다.
사용자모드(User Mode): 응용 프로그램과 일반 사용자 프로세스가 실행되는 모드입니다. 이 모드에서는 하드웨어와 시스템 자원에 대한 직접적인 접근이 제한됩니다. 응용 프로그램은 시스템 콜을 통해 커널 모드의 기능에 접근합니다.
커널모드(Kernel Mode): 운영체제의 커널과 드라이버가 실행되는 모드입니다. 이 모드에서는 하드웨어와 시스템 자원에 대한 완전한 접근 권한을 가집니다. 커널모드에서는 메모리 관리, 프로세스 관리, 디바이스 제어 등 시스템의 핵심 기능을 수행할 수 있습니다. 커널모드에서 실행되는 코드는 시스템의 안정성 및 보안성을 유지하는 중요한 역할을 합니다.

### 시스템 콜(System Call)의 역할과 중요성에 대해 설명해 주세요. 운영체제의 사용자모드와 커널모드 간의 상호작용에서 시스템 콜이 어떻게 작동하나요?

답변: 시스템 콜은 응용 프로그램이 커널모드에서 제공하는 기능을 사용할 수 있게 해주는 인터페이스입니다. 사용자모드에서 실행되는 응용 프로그램은 직접 하드웨어에 접근할 수 없기 때문에, 시스템 콜을 통해 커널의 서비스나 기능(파일 I/O, 프로세스 제어 등)을 요청합니다.
시스템 콜이 호출되면, 사용자모드에서 커널모드로 전환이 발생합니다. 이 과정은 trap 명령어를 통해 이루어지며, 커널은 요청된 작업을 수행한 후 다시 사용자모드로 돌아갑니다. 이 메커니즘은 사용자 프로세스가 시스템 자원에 안전하게 접근할 수 있게 하고, 시스템의 안정성과 보안을 유지합니다.

### 사용자모드에서 실행 중인 응용 프로그램이 커널모드의 서비스를 요청할 때, 이 과정에서 발생하는 주요 단계와 그 과정이 시스템의 안정성에 미치는 영향을 설명해 주세요.

답변: 사용자모드에서 커널모드의 서비스를 요청할 때, 다음 단계가 발생합니다:
응용 프로그램이 시스템 콜을 호출합니다.
이 호출은 사용자모드에서 커널모드로의 전환을 유도합니다. 이 과정에서 CPU의 모드가 변경되고, 적절한 커널 함수가 실행됩니다.
커널은 요청된 서비스를 수행합니다 (예: 파일 읽기, 메모리 할당).
서비스가 완료되면, 결과가 사용자모드로 반환되고 CPU는 다시 사용자모드로 전환됩니다.
이 과정은 시스템의 안정성을 보장하는데 중요한 역할을 합니다. 시스템 콜을 통해 커널이 응용 프로그램의 요청을 처리함으로써, 사용자 애플리케이션이 직접 하드웨어를 조작하는 것을 방지하고, 잠재적인 시스템 충돌이나 보안 위험을 줄입니다.

### 커널모드에서의 코드 실행과 사용자모드에서의 코드 실행의 성능 차이와 관련된 이유는 무엇인가요? 커널모드가 사용자모드보다 더 높은 권한을 가지는 이유는 무엇인가요?

답변: 커널모드에서의 코드 실행은 더 높은 권한을 가지며, 이로 인해 직접 하드웨어 자원에 접근하거나 중요한 시스템 리소스를 제어할 수 있습니다. 커널모드에서는 메모리 보호, 시스템 콜 처리, 하드웨어 인터럽트 처리 등 시스템의 핵심 기능을 수행할 수 있습니다.
성능 측면에서, 커널모드에서의 작업은 더 높은 권한을 가지기 때문에 더 직접적이고 빠르게 하드웨어 자원에 접근할 수 있지만, 이는 또한 시스템의 안정성과 보안성에 대한 더 큰 책임을 수반합니다.
사용자모드에서는 하드웨어 자원에 직접 접근할 수 없고, 시스템 콜을 통해서만 커널의 서비스를 요청할 수 있습니다. 이는 사용자 프로그램이 실수로 시스템 자원에 접근하거나 시스템의 상태를 변경하는 것을 방지하여, 시스템의 안정성을 높입니다.

### 운영체제의 핵심 기능 중 하나로서 시스템 콜이 왜 중요한가요? 시스템 콜을 잘못 사용하거나 악용했을 때 발생할 수 있는 문제와 그 해결 방법에 대해 논의해 주세요.

답변: 시스템 콜은 운영체제와 응용 프로그램 간의 중요한 인터페이스로서, 사용자 프로그램이 커널모드의 기능을 안전하고 효율적으로 사용할 수 있게 합니다.
중요성: 시스템 콜은 파일 시스템 접근, 프로세스 제어, 메모리 관리 등 다양한 시스템 서비스를 제공합니다. 이를 통해 응용 프로그램은 필요한 시스템 자원에 접근할 수 있습니다.
문제와 해결 방법: 시스템 콜을 잘못 사용하거나 악용할 경우, 보안 취약점이 발생할 수 있습니다. 예를 들어, 버퍼 오버플로우 공격이나 잘못된 입력 처리가 시스템의 불안정을 초래할 수 있습니다.
해결 방법으로는 시스템 콜의 유효성 검사, 입력 검증, 권한 관리 및 보안 패치 적용 등이 있습니다. 또한, 커널의 보안 정책을 강화하고, 잘못된 시스템 콜 사용을 방지하기 위한 코드 리뷰와 테스트를 철저히 수행하는 것이 중요합니다.
